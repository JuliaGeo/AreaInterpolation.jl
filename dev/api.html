<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AreaInterpolation.jl</title>
    <meta name="description" content="Documentation for AreaInterpolation.jl">
    <meta name="generator" content="VitePress v1.2.3">
    <link rel="preload stylesheet" href="/AreaInterpolation.jl/dev/assets/style.u0S38U28.css" as="style">
    
    <script type="module" src="/AreaInterpolation.jl/dev/assets/app.BW1paoES.js"></script>
    <link rel="preload" href="/AreaInterpolation.jl/dev/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/AreaInterpolation.jl/dev/assets/chunks/framework.CnMrKKX_.js">
    <link rel="modulepreload" href="/AreaInterpolation.jl/dev/assets/chunks/theme.BVoWPPl_.js">
    <link rel="modulepreload" href="/AreaInterpolation.jl/dev/assets/api.md.D5frVMjX.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c3508ec8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c3508ec8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar has-sidebar top" data-v-f1e365da data-v-40788ea0><div class="wrapper" data-v-40788ea0><div class="container" data-v-40788ea0><div class="title" data-v-40788ea0><div class="VPNavBarTitle has-sidebar" data-v-40788ea0 data-v-28a961f9><a class="title" href="/AreaInterpolation.jl/dev/" data-v-28a961f9><!--[--><!--]--><!----><span data-v-28a961f9>AreaInterpolation.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-40788ea0><div class="content-body" data-v-40788ea0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-40788ea0><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-40788ea0 data-v-492ea56d><span id="main-nav-aria-label" class="visually-hidden" data-v-492ea56d>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AreaInterpolation.jl/dev/index" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AreaInterpolation.jl/dev/concepts" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>Concepts</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AreaInterpolation.jl/dev/methods" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>Methods</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/AreaInterpolation.jl/dev/api" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>API</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Source code</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/AreaInterpolation" data-v-8b74d055><!--[-->source/AreaInterpolation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/interpolate" data-v-8b74d055><!--[-->The interpolate function<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>Methods</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/methods/dasymetric" data-v-8b74d055><!--[-->Dasymetric interpolation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/methods/direct" data-v-8b74d055><!--[-->Direct interpolation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/methods/pycnophylactic" data-v-8b74d055><!--[-->Pycnophylactic interpolation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/methods/weighted_pycnophylactic" data-v-8b74d055><!--[-->source/methods/weighted_pycnophylactic<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/types" data-v-8b74d055><!--[-->Types<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/AreaInterpolation.jl/dev/source/utils" data-v-8b74d055><!--[-->source/utils<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-40788ea0 data-v-ead91a81><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-ead91a81 data-v-b79b56d4 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-b79b56d4></span><span class="vpi-moon moon" data-v-b79b56d4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-40788ea0 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGeo/AreaInterpolation.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-40788ea0 data-v-9b536d0b data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e5380155><span class="vpi-more-horizontal icon" data-v-e5380155></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><!----><!--[--><!--[--><!----><div class="group" data-v-9b536d0b><div class="item appearance" data-v-9b536d0b><p class="label" data-v-9b536d0b>Appearance</p><div class="appearance-action" data-v-9b536d0b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-9b536d0b data-v-b79b56d4 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-b79b56d4></span><span class="vpi-moon moon" data-v-b79b56d4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9b536d0b><div class="item social-links" data-v-9b536d0b><div class="VPSocialLinks social-links-list" data-v-9b536d0b data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/JuliaGeo/AreaInterpolation.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-40788ea0 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-40788ea0><div class="divider-line" data-v-40788ea0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-bc9dc845><button data-v-bc9dc845>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-ec846e01><div class="curtain" data-v-ec846e01></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ec846e01><span class="visually-hidden" id="sidebar-aria-label" data-v-ec846e01> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-ec846e01><section class="VPSidebarItem level-0 has-active" data-v-ec846e01 data-v-2ea20db7><!----><div class="items" data-v-2ea20db7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/index" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/concepts" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Concepts</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/methods" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Methods</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/api" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ec846e01><section class="VPSidebarItem level-0 collapsible" data-v-ec846e01 data-v-2ea20db7><div class="item" role="button" tabindex="0" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><h2 class="text" data-v-2ea20db7>Source code</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-2ea20db7><span class="vpi-chevron-right caret-icon" data-v-2ea20db7></span></div></div><div class="items" data-v-2ea20db7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/AreaInterpolation" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>source/AreaInterpolation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/interpolate" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>The interpolate function</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible" data-v-2ea20db7 data-v-2ea20db7><div class="item" role="button" tabindex="0" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><h3 class="text" data-v-2ea20db7>Methods</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-2ea20db7><span class="vpi-chevron-right caret-icon" data-v-2ea20db7></span></div></div><div class="items" data-v-2ea20db7><!--[--><div class="VPSidebarItem level-2 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/methods/dasymetric" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Dasymetric interpolation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/methods/direct" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Direct interpolation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/methods/pycnophylactic" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Pycnophylactic interpolation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/methods/weighted_pycnophylactic" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>source/methods/weighted_pycnophylactic</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/types" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Types</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/AreaInterpolation.jl/dev/source/utils" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>source/utils</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _AreaInterpolation_jl_dev_api" data-v-83890dd9><div><h2 id="API-reference" tabindex="-1">API reference <a class="header-anchor" href="#API-reference" aria-label="Permalink to &quot;API reference {#API-reference}&quot;">​</a></h2><ul><li><a href="#AreaInterpolation.AbstractInterpolationMethod"><code>AreaInterpolation.AbstractInterpolationMethod</code></a></li><li><a href="#AreaInterpolation.Dasymetric"><code>AreaInterpolation.Dasymetric</code></a></li><li><a href="#AreaInterpolation.Direct"><code>AreaInterpolation.Direct</code></a></li><li><a href="#AreaInterpolation.Pycno"><code>AreaInterpolation.Pycno</code></a></li><li><a href="#AreaInterpolation.Pycnophylactic"><code>AreaInterpolation.Pycnophylactic</code></a></li><li><a href="#AreaInterpolation.decompose_to_geoms_and_values-Tuple{Any}"><code>AreaInterpolation.decompose_to_geoms_and_values</code></a></li><li><a href="#AreaInterpolation.nan_aware_kernelproduct-Union{Tuple{L}, Tuple{Stencils.Stencil{&lt;:Any, &lt;:Any, L}, Any}} where L"><code>AreaInterpolation.nan_aware_kernelproduct</code></a></li><li><a href="#AreaInterpolation.pycno_iteration!-NTuple{6, Any}"><code>AreaInterpolation.pycno_iteration!</code></a></li><li><a href="#AreaInterpolation.pycno_raster-Tuple{Pycnophylactic, Any, Any}"><code>AreaInterpolation.pycno_raster</code></a></li><li><a href="#AreaInterpolation.rasterized_polygon_areas-Tuple{Any, Any}"><code>AreaInterpolation.rasterized_polygon_areas</code></a></li></ul><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.AbstractInterpolationMethod" href="#AreaInterpolation.AbstractInterpolationMethod">#</a> <b><u>AreaInterpolation.AbstractInterpolationMethod</u></b> — <i>Type</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">abstract type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AbstractInterpolationMethod</span></span></code></pre></div><p>The abstract type for all areal interpolation methods.</p><p><strong>Interface</strong></p><p>All <code>AbstractArealInterpolator</code>s must implement the following interface:</p><ul><li><code>interpolate(interpolator::AbstractInterpolationMethod, target::GI.AbstractPolygon, sources, values::Vector{Vector}, source_rtree)</code></li></ul><p>This interface is not set in stone and can be changed!</p><p>TODOS: - extensive vs intensive variables (currently we act as though variables are intensive) - weight methods (sum vs total) - just pass any arbitrary accumulator</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/types.jl#L6-L19" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.Dasymetric" href="#AreaInterpolation.Dasymetric">#</a> <b><u>AreaInterpolation.Dasymetric</u></b> — <i>Type</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Dasymetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mask</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Raster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Dasymetric interpolation uses a mask to weight the influence of each polygon.</p><p>Depending on the choice of mask, like land-use data, this can prove to be a more accurate interpolation than the direct or pycnophylactic methods.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/types.jl#L91-L98" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.Direct" href="#AreaInterpolation.Direct">#</a> <b><u>AreaInterpolation.Direct</u></b> — <i>Type</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Direct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>A simple direct method for areal interpolation.</p><p>Takes the area-weighted mean of all source polygons&#39; features, weighted by their areas of intersection with the target polygon.</p><p>This method does not allocate a Raster, but it does perform polygon intersection tests.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/types.jl#L25-L34" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.Pycno" href="#AreaInterpolation.Pycno">#</a> <b><u>AreaInterpolation.Pycno</u></b> — <i>Type</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Pycno</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Alias for <a href="/AreaInterpolation.jl/dev/api#AreaInterpolation.Pycnophylactic"><code>Pycnophylactic</code></a>.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/types.jl#L83-L87" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.Pycnophylactic" href="#AreaInterpolation.Pycnophylactic">#</a> <b><u>AreaInterpolation.Pycnophylactic</u></b> — <i>Type</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Pycnophylactic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cellsize; relaxation, maxiters, tol)</span></span></code></pre></div><p>A pycnophylactic method for areal interpolation.</p><p>Pycnophylactic interpolation (Tobler, 1979) interpolates the source zone attribute to the target zones in a way that avoids sharp discontinuities between neighbouring target zones. It assumes that no sharp boundaries exist in the distribution of the allocated data, which may not be the case, for example, when target zones are divided by linear features (rivers, railways, roads) or are adjacent to waterbodies.</p><p>However, it generates intuitively elegant allocations for many urban case studies with many applications (Kounadi, Ristea, Leitner, &amp; Langford, 2018; Comber, Proctor, &amp; Anthony, 2008).</p><p>This description was taken in part from <a href="https://gistbok.ucgis.org/bok-topics/areal-interpolation" target="_blank" rel="noreferrer">the GIS&amp;T Body of Knowledge</a>.</p><p><strong>Fields</strong></p><ul><li><p><code>cellsize</code>: The cell size of the raster to be interpolated, in units of the CRS of the input polygons (can be degrees or meters). <strong>Required argument!</strong></p></li><li><p><code>kernel</code>: The kernel with which to smooth the raster. Defaults to a 2-D Moore window of size 1, with value 0.5.</p></li><li><p><code>relaxation</code>: The relaxation factor. Defaults to <code>0.2</code>.</p></li><li><p><code>maxiters</code>: The maximum number of iterations. Defaults to <code>300</code>.</p></li><li><p><code>tol</code>: The error tolerance at which convergence is achieved. Defaults to <code>10e-3</code>.</p></li></ul><p><strong>Differences from other implementations</strong></p><p><code>tobler</code> in Python uses the equivalent of <code>Stencils.Kernel(Stencils.Cross(1, 2), [0.25, 0.25, 0, 0.25, 0.25])</code>. This implementation allows arbitrary kernels, so the user can choose the kind of smoothing and kernel window based on their desires.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/types.jl#L37-L62" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.decompose_to_geoms_and_values-Tuple{Any}" href="#AreaInterpolation.decompose_to_geoms_and_values-Tuple{Any}">#</a> <b><u>AreaInterpolation.decompose_to_geoms_and_values</u></b> — <i>Method</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">decompose_to_geoms_and_values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sources; features </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Decompose a table or feature collection into geometries and values. Returns <code>(geometries::Vector{Geometry}, values::NamedTuple{Vector})</code>.</p><p><code>values</code> is a namedtuple of each value column in <code>sources</code>. A value column is something whose eltype satisfies <code>isvaluecol</code>, and is currently <code>Union{Number, Missing}</code>.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/utils.jl#L5-L13" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.nan_aware_kernelproduct-Union{Tuple{L}, Tuple{Stencils.Stencil{&lt;:Any, &lt;:Any, L}, Any}} where L" href="#AreaInterpolation.nan_aware_kernelproduct-Union{Tuple{L}, Tuple{Stencils.Stencil{&lt;:Any, &lt;:Any, L}, Any}} where L">#</a> <b><u>AreaInterpolation.nan_aware_kernelproduct</u></b> — <i>Method</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nan_aware_kernelproduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hood</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Stencils.Stencil{&lt;:Any,&lt;:Any,L}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kernel) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L</span></span></code></pre></div><p>Compute the dot product of the kernel and the stencil, ignoring NaN values. This function is the equivalent of <code>Stencils.kernelproduct</code>.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/methods/pycnophylactic.jl#L148-L153" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.pycno_iteration!-NTuple{6, Any}" href="#AreaInterpolation.pycno_iteration!-NTuple{6, Any}">#</a> <b><u>AreaInterpolation.pycno_iteration!</u></b> — <i>Method</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pycno_iteration!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(old, new, sa, polygon_views, vals, relaxation)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float64</span></span></code></pre></div><p>Perform a single iteration of the pycnophylactic algorithm, and overwrites the values in <code>new</code> and <code>old</code> with the result. Returns the absolute maximum change in the data.</p><p><strong>Steps</strong></p><ol><li><p>Convolve the stencil in <code>sa</code> with <code>old</code> (stored in <code>sa</code> as well).</p></li><li><p>Apply the relaxation term to <code>new</code> and <code>old</code>.</p></li><li><p>Apply the area based correction to <code>new</code>.</p></li><li><p>Reset any negative values to 0.</p></li><li><p>Apply the mass preserving correction to <code>new</code>.</p></li><li><p>Find the maximum change in the data.</p></li><li><p>Overwrite the old data with the new data.</p></li></ol><p>Note that the kernel in <code>sa</code> <strong>must</strong> be normalized in the 1-norm. Additionally, the kernel is slightly different than the regular finite difference kernel - the center or self element is added separately, and therefore must be 0 in the kernel weight. Instead of a window, one might pass a Moore neighbourhood (which excludes the center).</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/methods/pycnophylactic.jl#L23-L45" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.pycno_raster-Tuple{Pycnophylactic, Any, Any}" href="#AreaInterpolation.pycno_raster-Tuple{Pycnophylactic, Any, Any}">#</a> <b><u>AreaInterpolation.pycno_raster</u></b> — <i>Method</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pycno_raster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pycno</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Pycnophylactic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, source_geometries, vals; extensive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Raster</span></span></code></pre></div><p>Perform pycnophylactic interpolation on <code>source_geometries</code>, using <code>vals</code> as the values. If <code>extensive</code> is <code>true</code>, then <code>vals</code> are the extensive values, and the area-adjusted values are computed for the intensive ones. Otherwise, <code>vals</code> are the intensive values, and the area-adjusted values are computed for the extensive ones.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/methods/pycnophylactic.jl#L242-L249" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="AreaInterpolation.rasterized_polygon_areas-Tuple{Any, Any}" href="#AreaInterpolation.rasterized_polygon_areas-Tuple{Any, Any}">#</a> <b><u>AreaInterpolation.rasterized_polygon_areas</u></b> — <i>Method</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rasterized_polygon_areas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source_geometries, cellsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vector{Float64}</span></span></code></pre></div><p>Compute the rasterized area of each polygon in <code>source_geometries</code>, on a Raster with resolution <code>cellsize</code>. <code>sour</code></p><p>Returns a vector of cell counts per source geometry.</p><p><a href="https://github.com/JuliaGeo/AreaInterpolation.jl/blob/4b6f98f11f4fef130cc3e2016e42b7fa564afc31/src/utils.jl#L29-L36" target="_blank" rel="noreferrer">source</a></p></div><br></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-b88cabfa><!--[--><!--]--><div class="edit-info" data-v-b88cabfa><div class="edit-link" data-v-b88cabfa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://https://github.com/JuliaGeo/AreaInterpolation.jl/edit/main/docs/src/api.md" target="_blank" rel="noreferrer" data-v-b88cabfa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-b88cabfa></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-b88cabfa><span class="visually-hidden" id="doc-footer-aria-label" data-v-b88cabfa>Pager</span><div class="pager" data-v-b88cabfa><a class="VPLink link pager-link prev" href="/AreaInterpolation.jl/dev/methods" data-v-b88cabfa><!--[--><span class="desc" data-v-b88cabfa>Previous page</span><span class="title" data-v-b88cabfa>Methods</span><!--]--></a></div><div class="pager" data-v-b88cabfa><a class="VPLink link pager-link next" href="/AreaInterpolation.jl/dev/source/AreaInterpolation" data-v-b88cabfa><!--[--><span class="desc" data-v-b88cabfa>Next page</span><span class="title" data-v-b88cabfa>source/AreaInterpolation</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2024.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"source_interpolate.md\":\"SbMivSFf\",\"source_methods_weighted_pycnophylactic.md\":\"CJOooAc6\",\"source_areainterpolation.md\":\"5bGPHHrO\",\"index.md\":\"LTjDq4ol\",\"concepts.md\":\"Bs2PDU0R\",\"source_methods_direct.md\":\"D948336J\",\"source_methods_pycnophylactic.md\":\"C5rnVr7r\",\"methods.md\":\"B9SWnZrK\",\"source_utils.md\":\"C7tuhTgq\",\"source_types.md\":\"DqRZPpBm\",\"source_methods_dasymetric.md\":\"Ki2hC_uP\",\"api.md\":\"D5frVMjX\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AreaInterpolation.jl\",\"description\":\"Documentation for AreaInterpolation.jl\",\"base\":\"/AreaInterpolation.jl/dev/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Concepts\",\"link\":\"/concepts\"},{\"text\":\"Methods\",\"link\":\"/methods\"},{\"text\":\"API\",\"link\":\"/api\"},{\"text\":\"Source code\",\"collapsed\":false,\"items\":[{\"text\":\"source/AreaInterpolation\",\"link\":\"/source/AreaInterpolation\"},{\"text\":\"The interpolate function\",\"link\":\"/source/interpolate\"},{\"text\":\"Methods\",\"collapsed\":false,\"items\":[{\"text\":\"Dasymetric interpolation\",\"link\":\"/source/methods/dasymetric\"},{\"text\":\"Direct interpolation\",\"link\":\"/source/methods/direct\"},{\"text\":\"Pycnophylactic interpolation\",\"link\":\"/source/methods/pycnophylactic\"},{\"text\":\"source/methods/weighted_pycnophylactic\",\"link\":\"/source/methods/weighted_pycnophylactic\"}]},{\"text\":\"Types\",\"link\":\"/source/types\"},{\"text\":\"source/utils\",\"link\":\"/source/utils\"}]}],\"sidebar\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Concepts\",\"link\":\"/concepts\"},{\"text\":\"Methods\",\"link\":\"/methods\"},{\"text\":\"API\",\"link\":\"/api\"},{\"text\":\"Source code\",\"collapsed\":false,\"items\":[{\"text\":\"source/AreaInterpolation\",\"link\":\"/source/AreaInterpolation\"},{\"text\":\"The interpolate function\",\"link\":\"/source/interpolate\"},{\"text\":\"Methods\",\"collapsed\":false,\"items\":[{\"text\":\"Dasymetric interpolation\",\"link\":\"/source/methods/dasymetric\"},{\"text\":\"Direct interpolation\",\"link\":\"/source/methods/direct\"},{\"text\":\"Pycnophylactic interpolation\",\"link\":\"/source/methods/pycnophylactic\"},{\"text\":\"source/methods/weighted_pycnophylactic\",\"link\":\"/source/methods/weighted_pycnophylactic\"}]},{\"text\":\"Types\",\"link\":\"/source/types\"},{\"text\":\"source/utils\",\"link\":\"/source/utils\"}]}],\"editLink\":{\"pattern\":\"https://https://github.com/JuliaGeo/AreaInterpolation.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/JuliaGeo/AreaInterpolation.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2024.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>